{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Panel</title>
    <link rel="stylesheet" href="{% static 'style.css' %}">
    <link rel="stylesheet" href=" {% static 'admin.css' %}">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons+Sharp">
</head>
<body>
    <div class="container">
        <aside>
            <div class="top">
             <div class="logo">
               <img src="{% static 'media/logo.png' %}" alt="">
             </div>
             <div class="close" id="close-btn">
                 <span class="material-icons-sharp">close</span>
             </div>
            </div>
            <div class="sidebar">
             <a href="{% url 'admins:ahomepage' %}" class="active">
                 <span class="material-icons-sharp">grid_view</span>
                 <h3>Dashboard</h3>
             </a>
             <a href="{% url 'admins:customers' %}">
                 <span class="material-icons-sharp">person_outline</span>
                 <h3>Customers</h3>
             </a>
             <a href="{% url 'admins:analytics' %}">
                 <span class="material-icons-sharp">receipt_long</span>
                 <h3>Analytics</h3>
             </a>
             <a href="{% url 'admins:messages' %}">
                 <span class="material-icons-sharp">mail_outline</span>
                 <h3>Messages</h3>
                 <span class="message-count">1</span>
             </a>
             <a href="{% url 'admins:products' %}">
                 <span class="material-icons-sharp">inventory</span>
                 <h3>Products</h3>
             </a>
             <a href="{% url 'admins:order' %}">
                 <span class="material-icons-sharp">local_mall</span>
                 <h3>Orders</h3>
             </a>
             <a href="{% url 'admins:news' %}">
                 <span class="material-icons-sharp">newspaper</span>
                 <h3>NewsLetter/Blogs</h3>
             </a>
             <a href="{% url 'admins:aproduct' %}">
                 <span class="material-icons-sharp">add</span>
                 <h3>Add Product</h3>
             </a>
             <a href="{% url 'admins:acontrol' %}">
                 <span class="material-icons-sharp">admin_panel_settings</span>
                 <h3>Admin</h3>
             </a>
             <a href="{% url 'admin_signout' %}">
                 <span class="material-icons-sharp">logout</span>
                 <h3><a href="{% url 'admin_signout' %}">Logout</a></h3>
             </a>
            </div>
         </aside>
        <main>
            <h1>Profile</h1>
            <div class="date">
                <input type="date">
            </div>
            <div class="container2">
                <!-- Error message popup -->
{% for message in messages %}
<div class="error-popup alert-{{ message.tags }}">{{ message }}</div>
<div class="success-popup alert-{{ message.tags }}" >{{ message }}</div>
{% endfor %}

<div class="success-popup">
   <h4>Hello, {{ user.full_name }}!</h4>
   <h5>You're successfully logged in</h5>
</div>
       <div id="admin">
           <img src="{% static 'media/User.png' %}" alt="" width="100px" id="admin_img">
           <h5>User Name:  {{ user.username }}</h5><br>
           <h5>Name:  {{ user.full_name }}</h5><br>
           <h5>Email:  {{ user.email }}</h5><br>
           <h3>Privilege: update, read, delete, create</h3>
       </div>
       <div id="profile-settings">
           <h1>Profile Settings</h1>
           <form method="POST" action="{% url 'admin_save_profile' %}">
       <label for="first-name">User Name:</label><br>
       <input type="text" id="first-name" name="username" value="{{ user.username }}"><br>
       <label for="first-name">Name:</label><br>
       <input type="text" id="first-name" name="full_name" value="{{ user.full_name }}"><br>
       <label for="email">Email:</label><br>
       <input type="email" id="email" name="email" value="{{ user.email }}"><br>
       <label for="password">Password:</label><br>
       <input type="password" id="password" name="password"><br>
       <input type="submit" value="Save Profile">
           </form>
       </div>
   </div> 
        </main>
        <div class="right">
            <div class="top">
                <button id="menu-btn">
                    <span class="material-icons-sharp">menu</span>
                </button>
                <div class="theme-toggler">
                    <span class="material-icons-sharp active">light_mode</span>
                    <span class="material-icons-sharp">dark_mode</span>
                </div>
                <div class="profile">
                    <div class="info">
                        <p>Hey, <b>{{user.full_name}}</b></p>
                        <small class="text-muted">Admin</small>
                    </div>
                    <div class="profile-photo">
                        <img src="{% static 'media/Admin.png' %}" alt="">
                    </div>
                </div>
            </div>
            <div class="recent-updates">
                <h2>New Customers</h2>
                <a href="{% url 'admins:customers' %}">
                <div class="updates">
                <div class="update">
                    <div class="profile-photo">
                        <img src="{% static 'media/User.png' %}" alt="">
                    </div>
                    <div class="message">
                        <p><b>Abebe Kebede</b> just registered.</p>
                        <small class="text-muted">2 Min Ago</small>
                    </div>
                </div>
                <div class="update">
                    <div class="profile-photo">
                        <img src="{% static 'media/User.png' %}" alt="">
                    </div>
                    <div class="message">
                        <p><b>Abebe Kebede</b> just registered.</p>
                        <small class="text-muted">2 Min Ago</small>
                    </div>
                </div>
                <div class="update">
                    <div class="profile-photo">
                        <img src="{% static 'media/User.png' %}" alt="">
                    </div>
                    <div class="message">
                        <p><b>Abebe Kebede</b> just registered.</p>
                        <small class="text-muted">2 Min Ago</small>
                    </div>
                </div>
            </div>
        </a>
            </div>
        <div class="sales-analytics">
            <h2>Sales Analytics</h2>
            <a href="a{% url 'admins:analytics' %}">
            <div class="item online">
                <div class="icon">
                    <span class="material-icons-sharp">shopping_cart</span>
                </div>
                <div class="right">
                    <div class="info">
                        <h3>ONLINE ORDERS</h3>
                        <small class="text-muted">Last 24 Hours</small>
                    </div>
                    <h5 class="success">+39%</h5>
                    <h3>3849</h3>
                </div>
            </div>
            <div class="item offline">
                <div class="icon">
                    <span class="material-icons-sharp">local_mall</span>
                </div>
                <div class="right">
                    <div class="info">
                        <h3>OFFLINE ORDERS</h3>
                        <small class="text-muted">Last 24 Hours</small>
                    </div>
                    <h5 class="danger">-17%</h5>
                    <h3>1100</h3>
                </div>
            </div>
            <div class="item customers">
                <div class="icon">
                    <span class="material-icons-sharp">person</span>
                </div>
                <div class="right">
                    <div class="info">
                        <h3>NEW CUSTOMERS</h3>
                        <small class="text-muted">Last 24 Hours</small>
                    </div>
                    <h5 class="success">+25%</h5>
                    <h3>849</h3>
                </div>
            </div>
        </a>
            <a href="{% url 'admins:aproduct' %}">
                <div class="item add-product">
                   <div>
                    <span class="material-icons-sharp">add</span>
                    <h3>Add Product</h3>
                   </div>
                </div>
            </a>
        </div>
    </div>
</div>
<script>
    // Function to show success or error popup
    function showMessagePopup(message, messageType, formType) {
      const popup = document.querySelector(`.${messageType}-popup`); // Get popup element by message type
      if (popup) { // Check if element exists before manipulating it
        popup.innerText = message;
        popup.classList.add('show');
        setTimeout(() => {
          popup.classList.remove('show');
        }, 5000); // 5 seconds timeout for popup
      } else {
        console.error(`${messageType} popup element not found`);
      }
    }
    
    // Access Django success or error messages and show popups
    const messages = document.querySelectorAll('.error-popup'); 
    
    // Loop through Django messages and show popups
    messages.forEach(message => {
      const messageText = message.textContent;
      const messageType = message.classList.contains('alert-success') ? 'success' : 'error';
      const formType = message.parentElement.parentElement.classList.contains('login') ? 'login' : 'register'; // Identify form type
      showMessagePopup(messageText, messageType, formType);
    });
    </script>
<script src="{% static index.js%}"></script>
</body>
</html>